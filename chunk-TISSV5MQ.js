import{a as ae,b as le,d as ge,e as de,f as me,g as pe,i as fe,j as he,k as ue,l as be,m as Ce,o as ke,p as ye,q as Pe}from"./chunk-REHROBNL.js";import"./chunk-SFYXLREG.js";import"./chunk-QUJFQN2Y.js";import"./chunk-CPFQNT3M.js";import"./chunk-Q2K4WUXA.js";import"./chunk-LM2XZ3BW.js";import"./chunk-RP3SLK2T.js";import"./chunk-3BRIQS6Y.js";import"./chunk-A4WPJD5T.js";import"./chunk-6XMIRX4Z.js";import"./chunk-2C6VJO7E.js";import"./chunk-ZG5PDWAP.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-AMAXAZMB.js";import"./chunk-CKP3SGE2.js";import"./chunk-ROKKADGQ.js";import{$ as f,B as H,C as $,Ca as oe,F as M,Ga as ie,I as p,K,L as a,M as g,N as _,S as O,T as U,W as Z,a as W,aa as Y,b as A,ba as w,cb as re,d as B,da as v,db as se,ea as I,f as b,fa as x,gb as ce,h as R,ha as G,ia as C,ja as S,k as j,ka as J,l as V,pa as Q,sa as X,ta as ee,ua as te,va as ne,x as q,y as l,z as P}from"./chunk-CIFWT2IC.js";import"./chunk-LWRAKGWZ.js";import"./chunk-NNO5R6XJ.js";import"./chunk-CGOJMAMR.js";import"./chunk-MDWVWDOE.js";import"./chunk-PS2NURIG.js";import"./chunk-FXFZIWDD.js";import"./chunk-ZD3NZWAU.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-RW4GY4BD.js";function Le(){return typeof window<"u"?window.navigator:void 0}function _e(t){return!!(t.parentElement&&t.parentElement.nodeName.toLowerCase()==="picture")}function u(t){return t.nodeName.toLowerCase()==="img"}function Oe(t,e,n){return u(t)?n&&"srcset"in t?t.srcset=e:t.src=e:t.style.backgroundImage=`url('${e}')`,t}function N(t){return e=>{let n=e.parentElement.getElementsByTagName("source");for(let o=0;o<n.length;o++){let i=n[o].getAttribute(t);i&&("srcset"in n[o]?n[o].srcset=i:n[o].src=i)}}}var Te=N("defaultImage"),we=N("lazyLoad"),Ee=N("errorImage");function D(t){return(e,n,o)=>{u(e)&&_e(e)&&t(e),n&&Oe(e,n,o)}}var ze=D(Te),Ne=D(we),De=D(Ee),T=class{constructor(){this.navigator=Le()}setPlatformId(e){this.platformId=e}onDestroy(e){}onAttributeChange(e){}},h={loaded:"ng-lazyloaded",loading:"ng-lazyloading",failed:"ng-failed-lazyloaded"};function Me(t,e){t.className=t.className.replace(e,"")}function L(t,e){t.className.includes(e)||(t.className+=` ${e}`)}function Fe(t,e){return t.className&&t.className.includes(e)}var E=class extends T{setup(e){ze(e.element,e.defaultImagePath,e.useSrcset),e.imagePath&&L(e.element,h.loading),Fe(e.element,h.loaded)&&Me(e.element,h.loaded)}finally(e){L(e.element,h.loaded),Me(e.element,h.loading)}loadImage(e){if(this.skipLazyLoading(e))return[e.imagePath];let{element:n,useSrcset:o,imagePath:i,decode:r}=e,s;return u(n)&&_e(n)?(s=n.parentNode.cloneNode(!0).getElementsByTagName("img")[0],we(s),Oe(s,i,o)):(s=new Image,u(n)&&n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),u(n)&&n.sizes&&(s.sizes=n.sizes),o&&"srcset"in s?s.srcset=i:s.src=i),r&&s.decode?s.decode().then(()=>i):new Promise((c,F)=>{s.onload=()=>c(i),s.onerror=()=>F(null)})}setErrorImage(e,n){let{element:o,useSrcset:i,errorImagePath:r}=n;De(o,r,i),L(o,h.failed)}setLoadedImage(e,n){let{element:o,useSrcset:i}=n;Ne(o,e,i)}isDisabled(){return ne(this.platformId)&&!this.isBot()}skipLazyLoading(e){return this.isBot(e)}isBot(e){var n;return(n=this.navigator)!=null&&n.userAgent?/googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora\ link\ preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|duckduckbot|prerender/i.test(this.navigator.userAgent):!1}},z=class extends E{constructor(){super(...arguments),this.observers=new WeakMap,this.intersectionSubject=new A,this.uniqKey={}}getObservable(e){if(this.skipLazyLoading(e))return B({isIntersecting:!0});if(e.customObservable)return e.customObservable;let n=e.scrollContainer||this.uniqKey,o={root:e.scrollContainer||null};e.offset&&(o.rootMargin=`${e.offset}px`);let i=this.observers.get(n);return i||(i=new IntersectionObserver(r=>this.loadingCallback(r),o),this.observers.set(n,i)),i.observe(e.element),W.create(r=>{let s=this.intersectionSubject.pipe(R(c=>c.target===e.element)).subscribe(r);return()=>{s.unsubscribe(),i.unobserve(e.element)}})}isVisible(e){return e.isIntersecting}loadingCallback(e){e.forEach(n=>this.intersectionSubject.next(n))}};var We=new V("LazyLoadImageHooks");var ve=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=$({type:t}),t.\u0275inj=j({providers:[{provide:We,useClass:z}]}),t})(),k=class t{constructor(e,n,o,i){this.left=e,this.top=n,this.right=o,this.bottom=i}static fromElement(e){let{left:n,top:o,right:i,bottom:r}=e.getBoundingClientRect();return n===0&&o===0&&i===0&&r===0?t.empty:new t(n,o,i,r)}static fromWindow(e){return new t(0,0,e.innerWidth,e.innerHeight)}inflate(e){this.left-=e,this.top-=e,this.right+=e,this.bottom+=e}intersectsWith(e){return e.left<this.right&&this.left<e.right&&e.top<this.bottom&&this.top<e.bottom}getIntersectionWith(e){let n=Math.max(this.left,e.left),o=Math.max(this.top,e.top),i=Math.min(this.right,e.right),r=Math.min(this.bottom,e.bottom);return i>=n&&r>=o?new t(n,o,i,r):t.empty}};k.empty=new k(0,0,0,0);var Ae=t=>["/details",t];function Be(t,e){if(t&1&&(a(0,"ion-segment-button",12),f(1),C(2,"titlecase"),g()),t&2){let n=e.$implicit;K("type-"+n.name),p("value",n.name),l(),w(" ",S(2,4,n.name)," ")}}function Re(t,e){if(t&1&&(a(0,"ion-card",13),_(1,"img",14),a(2,"ion-card-content")(3,"div",15),f(4),C(5,"number"),g(),a(6,"div",16),f(7),C(8,"titlecase"),g()()()),t&2){let n=e.$implicit,o=U();p("routerLink",G(10,Ae,n.id)),l(),Z("alt",n.name),p("src",o.getPokemonImage(n),q),l(3),w("#",J(5,5,n.id,"3.0-0"),""),l(3),Y(S(8,8,n.name))}}var vt=(()=>{let e=class e{constructor(o){this.pokemonService=o,this.pokemons=[],this.displayedPokemons=[],this.offset=0,this.limit=30,this.loading=!1,this.allLoaded=!1,this.types=[{name:"All",url:""}],this.selectedType="",this.searchTerm=""}ngOnInit(){this.loadTypes(),this.loadPokemons()}loadTypes(){this.pokemonService.getPokemonTypes().subscribe(o=>{this.types=o.results})}loadPokemons(){this.loading||this.allLoaded||(this.loading=!0,this.pokemonService.getPokemonList(this.offset,this.limit).subscribe(o=>{let i=o.results.map(r=>this.pokemonService.getPokemonDetails(r.name));b(i).subscribe(r=>{this.pokemons=[...this.pokemons,...r],this.applyFilters(),this.offset+=this.limit,this.loading=!1,this.offset===this.limit&&this.loadRemainingPokemonsInBackground(),o.next===null&&(this.allLoaded=!0)})}))}loadRemainingPokemonsInBackground(){let i=[],r=this.offset;for(;r<10277;)i.push(this.pokemonService.getPokemonList(r,100)),r+=100;b(i).subscribe(s=>{let c=[];s.forEach(d=>{c.push(...d.results)});let Ie=c.filter(d=>{let m=this.extractIdFromUrl(d.url);return m>=1&&m<=1025||m>=10001&&m<=10277}).map(d=>this.pokemonService.getPokemonDetails(d.name));b(Ie).subscribe(d=>{let m=new Set(this.pokemons.map(y=>y.id)),xe=d.filter(y=>!m.has(y.id));this.pokemons=[...this.pokemons,...xe],this.applyFilters(),this.allLoaded=!0})})}extractIdFromUrl(o){let i=o.split("/").filter(r=>r);return Number(i[i.length-1])}onSearchChange(){this.applyFilters()}filterByType(o){this.selectedType=o,this.applyFilters()}applyFilters(){let o=[...this.pokemons];if(this.selectedType&&this.selectedType!==""&&(o=o.filter(i=>i.types.some(r=>r.type.name===this.selectedType))),this.searchTerm.trim()!==""){let i=this.searchTerm.toLowerCase();o=o.filter(r=>r.name.toLowerCase().includes(i))}this.displayedPokemons=o}getPokemonImage(o){var i;return(i=o.sprites)==null?void 0:i.front_default}};e.\u0275fac=function(i){return new(i||e)(P(Pe))},e.\u0275cmp=H({type:e,selectors:[["app-home"]],decls:15,vars:4,consts:[["color","danger",1,"home-toolbar"],[1,"header-content"],["src","../../../assets/icon/favicon.png","alt","pokedex",1,"header-logo"],[1,"header-title"],[1,"home-content"],[1,"filter-section"],["scrollable","true",1,"type-filter",3,"ngModelChange","ionChange","ngModel"],["value","",1,"type-all"],[3,"value","class",4,"ngFor","ngForOf"],["placeholder","Buscar Pok\xE9mon...","animated","true","clearIcon","close-circle",1,"pokemon-search",3,"ngModelChange","ionInput","ngModel"],[1,"pokemon-grid"],["class","pokemon-card",3,"routerLink",4,"ngFor","ngForOf"],[3,"value"],[1,"pokemon-card",3,"routerLink"],[1,"pokemon-image",3,"src","alt"],[1,"pokemon-number"],[1,"pokemon-name"]],template:function(i,r){i&1&&(a(0,"ion-header")(1,"ion-toolbar",0)(2,"div",1),_(3,"img",2),a(4,"ion-title",3),f(5,"Pok\xE9dex"),g()()()(),a(6,"ion-content",4)(7,"div",5)(8,"ion-segment",6),x("ngModelChange",function(c){return I(r.selectedType,c)||(r.selectedType=c),c}),O("ionChange",function(){return r.filterByType(r.selectedType)}),a(9,"ion-segment-button",7),f(10,"Todos"),g(),M(11,Be,3,6,"ion-segment-button",8),g()(),a(12,"ion-searchbar",9),x("ngModelChange",function(c){return I(r.searchTerm,c)||(r.searchTerm=c),c}),O("ionInput",function(){return r.onSearchChange()}),g(),a(13,"div",10),M(14,Re,9,12,"ion-card",11),g()()),i&2&&(l(8),v("ngModel",r.selectedType),l(3),p("ngForOf",r.types),l(),v("ngModel",r.searchTerm),l(2),p("ngForOf",r.displayedPokemons))},dependencies:[te,Q,ee,X,ye,ge,de,me,pe,fe,he,ue,be,Ce,ae,le,ke,ce,re,se,ve,ie,oe],styles:['@charset "UTF-8";.home-content[_ngcontent-%COMP%]{--background: #f5f5f5;--padding-top: 16px;--padding-bottom: 16px;--padding-start: 16px;--padding-end: 16px;overflow-x:hidden}.home-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-danger);--color: white}.home-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 16px}.home-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-logo[_ngcontent-%COMP%]{width:40px;height:40px;margin-right:12px}.home-toolbar[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;padding:0;margin:0;color:#fff}.filter-section[_ngcontent-%COMP%]{margin-bottom:16px;overflow-x:hidden}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]{display:flex;overflow-x:auto;white-space:nowrap;padding:8px 0;gap:4px;scrollbar-width:none;-ms-overflow-style:none}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{flex:0 0 auto;min-width:90px;margin:0 2px;text-transform:capitalize;--background: #f0f0f0;--color: #333;--color-checked: white;--indicator-color: transparent;border-radius:8px;transition:all .2s ease}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.segment-button-checked[_ngcontent-%COMP%]{font-weight:700;box-shadow:0 2px 6px #0003}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-all.segment-button-checked[_ngcontent-%COMP%]{background-color:#7a7a7a;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-normal.segment-button-checked[_ngcontent-%COMP%]{background-color:#d3d28a;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-fire.segment-button-checked[_ngcontent-%COMP%]{background-color:#ee8130;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-water.segment-button-checked[_ngcontent-%COMP%]{background-color:#6390f0;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-electric.segment-button-checked[_ngcontent-%COMP%]{background-color:#f7d02c;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-grass.segment-button-checked[_ngcontent-%COMP%]{background-color:#7ac74c;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-ice.segment-button-checked[_ngcontent-%COMP%]{background-color:#96d9d6;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-fighting.segment-button-checked[_ngcontent-%COMP%]{background-color:#c22e28;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-poison.segment-button-checked[_ngcontent-%COMP%]{background-color:#a33ea1;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-ground.segment-button-checked[_ngcontent-%COMP%]{background-color:#e2bf65;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-flying.segment-button-checked[_ngcontent-%COMP%]{background-color:#a98ff3;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-psychic.segment-button-checked[_ngcontent-%COMP%]{background-color:#f95587;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-bug.segment-button-checked[_ngcontent-%COMP%]{background-color:#a6b91a;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-rock.segment-button-checked[_ngcontent-%COMP%]{background-color:#b6a136;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-ghost.segment-button-checked[_ngcontent-%COMP%]{background-color:#735797;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-dragon.segment-button-checked[_ngcontent-%COMP%]{background-color:#6f35fc;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-dark.segment-button-checked[_ngcontent-%COMP%]{background-color:#705746;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-steel.segment-button-checked[_ngcontent-%COMP%]{background-color:#b7b7ce;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-fairy.segment-button-checked[_ngcontent-%COMP%]{background-color:#d685ad;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-unknown.segment-button-checked[_ngcontent-%COMP%]{background-color:#9e9e9e;--color-checked: white;color:#fff}.filter-section[_ngcontent-%COMP%]   .type-filter[_ngcontent-%COMP%]   ion-segment-button.type-stellar.segment-button-checked[_ngcontent-%COMP%]{background-color:#ff69b4;--color-checked: white;color:#fff}.pokemon-search[_ngcontent-%COMP%]{padding:0 16px 16px;--background: white;--border-radius: 8px;--box-shadow: 0 2px 8px rgba(0, 0, 0, .1);--color: #333}.pokemon-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px;padding:0 16px}.pokemon-card[_ngcontent-%COMP%]{--background: white;border-radius:12px;box-shadow:0 4px 12px #0000001a;transition:transform .3s ease,box-shadow .3s ease;margin:0;overflow:visible}.pokemon-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 16px #00000026}.pokemon-card[_ngcontent-%COMP%]   .pokemon-image[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:contain;padding:16px}.pokemon-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:12px}.pokemon-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .pokemon-number[_ngcontent-%COMP%]{font-size:.9rem;color:#666;font-weight:500;margin-bottom:4px}.pokemon-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .pokemon-name[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;font-weight:600;margin:0}ion-content[_ngcontent-%COMP%]::part(scroll){scrollbar-width:thin;scrollbar-color:var(--ion-color-danger) #f0f0f0}ion-content[_ngcontent-%COMP%]::part(scroll)::-webkit-scrollbar{width:8px}ion-content[_ngcontent-%COMP%]::part(scroll)::-webkit-scrollbar-track{background:#f0f0f0;border-radius:10px}ion-content[_ngcontent-%COMP%]::part(scroll)::-webkit-scrollbar-thumb{background-color:var(--ion-color-danger);border-radius:10px;border:2px solid #f0f0f0}']});let t=e;return t})();export{vt as HomePage};
